<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PoolGuard - AI Drowning Detection</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <div class="container">
        <header>
            <div class="logo">PoolGuard AI</div>
            <div id="system-status" class="status-badge status-safe">System Online</div>
        </header>

        <main>
            <div class="dashboard-grid">
                <!-- Main Feed -->
                <div class="card">
                    <div class="card-header">
                        <h2 class="card-title">Live Detection Feed</h2>
                        <select id="source-select" style="background: #0f172a; color: white; border: 1px solid rgba(255,255,255,0.1); padding: 5px; border-radius: 4px;">
                            <option value="demos/output_whatsapp1_pose.mp4">Camera 01 (Deep End)</option>
                            <option value="demos/output_whatsapp2_pose.mp4">Camera 02 (Shallow End)</option>
                            <option value="demos/output_whatsapp3_pose.mp4">Camera 03 (Kids Pool)</option>
                        </select>
                    </div>
                    <div class="video-container">
                        <div class="live-badge">
                            <div class="live-dot"></div>
                            LIVE ANALYSIS
                        </div>
                        <video id="main-player" autoplay loop muted playsinline controls>
                            <source src="demos/output_whatsapp1_pose.mp4" type="video/mp4">
                        </video>
                    </div>
                </div>

                <!-- Sidebar Status -->
                <div class="card">
                    <div class="card-header">
                        <h2 class="card-title">Safety Status</h2>
                    </div>
                    
                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-value">3</div>
                            <div class="stat-label">Active Swimmers</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-value">0</div>
                            <div class="stat-label">Alerts Today</div>
                        </div>
                    </div>

                    <div class="status-list">
                        <div class="status-item">
                            <div class="status-avatar">1</div>
                            <div class="status-info">
                                <span class="status-name">Person #1</span>
                                <span class="status-badge status-safe">Active Swimmer</span>
                            </div>
                        </div>
                        <div class="status-item">
                            <div class="status-avatar">2</div>
                            <div class="status-info">
                                <span class="status-name">Person #2</span>
                                <span class="status-badge status-warning">Stationary (3s)</span>
                            </div>
                        </div>
                        <div class="status-item">
                            <div class="status-avatar">3</div>
                            <div class="status-info">
                                <span class="status-name">Person #3</span>
                                <span class="status-badge status-safe">Active Swimmer</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Demo Gallery -->
            <div class="card gallery-section">
                <div class="card-header">
                    <h2 class="card-title">Detection History & Demos</h2>
                </div>
                <div class="gallery-grid">
                    <div class="gallery-item" onclick="changeSource('demos/output_whatsapp1_pose.mp4')">
                        <div class="gallery-thumb">
                            <video loop muted>
                                <source src="demos/output_whatsapp1_pose.mp4" type="video/mp4">
                            </video>
                        </div>
                        <div class="gallery-info">
                            <div class="gallery-title">Deep End Monitoring</div>
                            <div class="gallery-meta">YOLOv8m-pose | 30 FPS</div>
                        </div>
                    </div>
                    <div class="gallery-item" onclick="changeSource('demos/output_whatsapp2_pose.mp4')">
                        <div class="gallery-thumb">
                            <video loop muted>
                                <source src="demos/output_whatsapp2_pose.mp4" type="video/mp4">
                            </video>
                        </div>
                        <div class="gallery-info">
                            <div class="gallery-title">Shallow Area Check</div>
                            <div class="gallery-meta">YOLOv8m-pose | 30 FPS</div>
                        </div>
                    </div>
                    <div class="gallery-item" onclick="changeSource('demos/output_whatsapp3_pose.mp4')">
                        <div class="gallery-thumb">
                            <video loop muted>
                                <source src="demos/output_whatsapp3_pose.mp4" type="video/mp4">
                            </video>
                        </div>
                        <div class="gallery-info">
                            <div class="gallery-title">Kids Pool Activity</div>
                            <div class="gallery-meta">YOLOv8m-pose | 30 FPS</div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <script>
        // Simple video switcher logic
        const player = document.getElementById('main-player');
        const selector = document.getElementById('source-select');

        function changeSource(src) {
            player.src = src;
            player.play();
            selector.value = src;
            
            // Highlight active gallery item (optional simple visual feedback)
            document.querySelectorAll('.gallery-thumb').forEach(el => el.style.borderColor = 'rgba(255,255,255,0.1)');
        }

        selector.addEventListener('change', (e) => {
            changeSource(e.target.value);
        });

        // Auto-play gallery hover preview
        document.querySelectorAll('.gallery-item').forEach(item => {
            const video = item.querySelector('video');
            item.addEventListener('mouseenter', () => video.play());
            item.addEventListener('mouseleave', () => {
                video.pause();
                video.currentTime = 0;
            });
        });
    </script>
</body>
</html>
